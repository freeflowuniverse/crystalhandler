<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>twinhandler</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Intro</a></li><li class="chapter-item expanded "><a href="v/index.html"><strong aria-hidden="true">2.</strong> V API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="v/crypto.html"><strong aria-hidden="true">2.1.</strong> Crypto</a></li><li class="chapter-item expanded "><a href="v/tfgrid.html"><strong aria-hidden="true">2.2.</strong> TFGrid</a></li><li class="chapter-item expanded "><a href="v/twinactions.html"><strong aria-hidden="true">2.3.</strong> Core</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">twinhandler</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="twin-actions"><a class="header" href="#twin-actions">Twin Actions</a></h1>
<p><img src="img/architecture.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="v-api"><a class="header" href="#v-api">V API</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="module-crypto"><a class="header" href="#module-crypto">module crypto</a></h1>
<h1 id="blockchain-actions-crypto"><a class="header" href="#blockchain-actions-crypto">Blockchain Actions (crypto)</a></h1>
<h2 id="contents"><a class="header" href="#contents">Contents</a></h2>
<ul>
<li><a href="v/crypto.html#account_delete">account_delete</a></li>
<li><a href="v/crypto.html#account_init">account_init</a></li>
<li><a href="v/crypto.html#asset_burn">asset_burn</a></li>
<li><a href="v/crypto.html#asset_create">asset_create</a></li>
<li><a href="v/crypto.html#asset_delete">asset_delete</a></li>
<li><a href="v/crypto.html#asset_mint">asset_mint</a></li>
<li><a href="v/crypto.html#buy">buy</a></li>
<li><a href="v/crypto.html#defi_pool_deposit">defi_pool_deposit</a></li>
<li><a href="v/crypto.html#defi_pool_info">defi_pool_info</a></li>
<li><a href="v/crypto.html#defi_pool_withdraw">defi_pool_withdraw</a></li>
<li><a href="v/crypto.html#defi_pool_withdraw_all">defi_pool_withdraw_all</a></li>
<li><a href="v/crypto.html#info">info</a></li>
<li><a href="v/crypto.html#orderbook_info">orderbook_info</a></li>
<li><a href="v/crypto.html#sell">sell</a></li>
<li><a href="v/crypto.html#send">send</a></li>
<li><a href="v/crypto.html#trade_delete">trade_delete</a></li>
<li><a href="v/crypto.html#trade_delete_all">trade_delete_all</a></li>
<li><a href="v/crypto.html#trade_info">trade_info</a></li>
<li><a href="v/crypto.html#AccountArgs">AccountArgs</a></li>
<li><a href="v/crypto.html#AccountAsset">AccountAsset</a></li>
<li><a href="v/crypto.html#AccountInfo">AccountInfo</a></li>
<li><a href="v/crypto.html#AssetBurnArgs">AssetBurnArgs</a></li>
<li><a href="v/crypto.html#AssetCreateArgs">AssetCreateArgs</a></li>
<li><a href="v/crypto.html#AssetDeleteArgs">AssetDeleteArgs</a></li>
<li><a href="v/crypto.html#AssetMintArgs">AssetMintArgs</a></li>
<li><a href="v/crypto.html#BuyActionArg">BuyActionArg</a></li>
<li><a href="v/crypto.html#DefiPoolDepositArgs">DefiPoolDepositArgs</a></li>
<li><a href="v/crypto.html#DefiPoolIdentity">DefiPoolIdentity</a></li>
<li><a href="v/crypto.html#DefiPoolInfo">DefiPoolInfo</a></li>
<li><a href="v/crypto.html#DefiPoolInfoPairInfo">DefiPoolInfoPairInfo</a></li>
<li><a href="v/crypto.html#DefiPoolWithDrawArgs">DefiPoolWithDrawArgs</a></li>
<li><a href="v/crypto.html#MultiSig">MultiSig</a></li>
<li><a href="v/crypto.html#OrderBookInfo">OrderBookInfo</a></li>
<li><a href="v/crypto.html#OrderBookInfoArgs">OrderBookInfoArgs</a></li>
<li><a href="v/crypto.html#OrderBookInfoPair">OrderBookInfoPair</a></li>
<li><a href="v/crypto.html#SellActionArg">SellActionArg</a></li>
<li><a href="v/crypto.html#SendArgs">SendArgs</a></li>
<li><a href="v/crypto.html#TradeInfoPair">TradeInfoPair</a></li>
</ul>
<h2 id="account_delete"><a class="header" href="#account_delete">account_delete</a></h2>
<pre><code class="language-v">fn account_delete(name string) ?
</code></pre>
<p>delete account on the handler in case it was already initialized, does not give error if not active yet if multisignature more than one will have to do</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="account_init"><a class="header" href="#account_init">account_init</a></h2>
<pre><code class="language-v">fn account_init(args AccountArgs) ?
</code></pre>
<p>init the account on the action handler will give error if it already exists and mneomonic or type different will also give error if an error to create it e.g. wrong mnemonic the account will be selected, which means all actions done after are done on this account</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="asset_burn"><a class="header" href="#asset_burn">asset_burn</a></h2>
<pre><code class="language-v">fn asset_burn(args AssetBurnArgs) ?
</code></pre>
<p>destroy some of the tokens of the asset multisignature is used when asset was multisignature</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="asset_create"><a class="header" href="#asset_create">asset_create</a></h2>
<pre><code class="language-v">fn asset_create(args AssetCreateArgs) ?
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="asset_delete"><a class="header" href="#asset_delete">asset_delete</a></h2>
<pre><code class="language-v">fn asset_delete(args AssetDeleteArgs) ?
</code></pre>
<p>deletes the asset, checks the multisignature approach</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="asset_mint"><a class="header" href="#asset_mint">asset_mint</a></h2>
<pre><code class="language-v">fn asset_mint(args AssetMintArgs) ?
</code></pre>
<p>mint amount of tokens of the asset multisignature is used when asset was multisignature</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="buy"><a class="header" href="#buy">buy</a></h2>
<pre><code class="language-v">fn buy(args BuyActionArg) ?string
</code></pre>
<p>set of actions to buy an asset everything is re-calculated to USD pricing of USD comes from the blockchain (only stellar/algorand) the action server will execute in the background and return a uid4 identifier, which can be used to check sometimes the blockchain supports a deadline, sometimes the action handler will have to do it</p>
<pre><code>pub struct BuyActionArg {
	asset_buy string 		// the asset you want to buy
	max_price_usd	f64		//maximum price your want to  biy for
	expirationtime_min	u16 //max time in minutes, the trade stays open
	memo       string 		// per type blockchain we need to check that memo
							field is not too long, is not everywhere used
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="defi_pool_deposit"><a class="header" href="#defi_pool_deposit">defi_pool_deposit</a></h2>
<pre><code class="language-v">fn defi_pool_deposit(account string, args DefiPoolDepositArgs) ?
</code></pre>
<p>set of arguments to create, or add to a DEFIPool</p>
<p>pool can exist or it can be a new one if there is already money, you will just add to it</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="defi_pool_info"><a class="header" href="#defi_pool_info">defi_pool_info</a></h2>
<pre><code class="language-v">fn defi_pool_info(args DefiPoolIdentity) ?DefiPoolInfo
</code></pre>
<p>get all info from defi pool</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="defi_pool_withdraw"><a class="header" href="#defi_pool_withdraw">defi_pool_withdraw</a></h2>
<pre><code class="language-v">fn defi_pool_withdraw(account string, args DefiPoolWithDrawArgs) ?
</code></pre>
<p>withdraw money from the pool need to specify which currency and amount per currency</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="defi_pool_withdraw_all"><a class="header" href="#defi_pool_withdraw_all">defi_pool_withdraw_all</a></h2>
<pre><code class="language-v">fn defi_pool_withdraw_all(account string, args DefiPoolIdentity) ?
</code></pre>
<p>withdraw money from the pool, do the maximum the purpose is to get all your money out from the pool the handler need to implement the logic to take all out</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="info"><a class="header" href="#info">info</a></h2>
<pre><code class="language-v">fn info(name string) ?AccountInfo
</code></pre>
<p>return info about your account, the name is the name of the account as used in .account_init() the info returned</p>
<pre><code class="language-v">pub struct AccountInfo {
	pubkey_bin     []u8 // binary form of key
	pubkey_ed25519 ed25519.PublicKey // can be empty, if not same type, but often it is
	assets         []Asset
}
pub struct AccountAsset {
	amount   f64
	currency string // always lowercase
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="orderbook_info"><a class="header" href="#orderbook_info">orderbook_info</a></h2>
<pre><code class="language-v">fn orderbook_info(account string, args OrderBookInfoArgs) ?string
</code></pre>
<p>returns all relevant info from an orderbook</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="sell"><a class="header" href="#sell">sell</a></h2>
<pre><code class="language-v">fn sell(args SellActionArg) ?string
</code></pre>
<p>set of actions to sell an asset everything is re-calculated to USD, the money you get back is in USDC pricing of USD comes from the blockchain (only stellar/algorand) the action server will execute in the background and return a uid4 identifier, which can be used to check sometimes the blockchain supports a deadline, sometimes the action handler will have to do it</p>
<pre><code>pub struct SellActionArg {
	asset_sell string 			// the asset you want to sell
	min_price_usd      f64    	// min price your want to sell for always in USDC
	expirationtime_min	u16 	// max time in minutes, the trade stays open
	memo       string 			// per type blockchain we need to check that memo
								field is not too long, is not everywhere used
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="send"><a class="header" href="#send">send</a></h2>
<pre><code class="language-v">fn send(args SendArgs) ?
</code></pre>
<p>send money to a user on the chosen blockchain network the account used is the one who is selected</p>
<pre><code>SendArgs {
		account string
		to string
		amount f64
		memo string
		currency string
}
``` multisig is supported, if account is multisig, the the needed needs to be done

[[Return to contents]](#Contents)

## trade_delete
```v
fn trade_delete(account string, uid string) ?TradeInfoPair
</code></pre>
<p>dlete an open trade, the uid is unique uid is uid4, and as given by sales/buy order creation</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="trade_delete_all"><a class="header" href="#trade_delete_all">trade_delete_all</a></h2>
<pre><code class="language-v">fn trade_delete_all(account string) ?TradeInfoPair
</code></pre>
<p>delete all you open trades</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="trade_info"><a class="header" href="#trade_info">trade_info</a></h2>
<pre><code class="language-v">fn trade_info(account string, uid string) ?TradeInfoPair
</code></pre>
<p>returns all relevant info from an orderbook uid is uid4, and as given by sales/buy order creation</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="accountargs"><a class="header" href="#accountargs">AccountArgs</a></h2>
<pre><code class="language-v">struct AccountArgs {
pub:
	name           string
	mnemonic       string
	blockchaintype BlockchainType
	expiration     int = 300 // will expire default 5 min
	multisig       MultiSig // optional
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="accountasset"><a class="header" href="#accountasset">AccountAsset</a></h2>
<pre><code class="language-v">struct AccountAsset {
	amount   f64
	currency string // always lowercase
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="accountinfo"><a class="header" href="#accountinfo">AccountInfo</a></h2>
<pre><code class="language-v">struct AccountInfo {
	pubkey_bin     []u8 // binary form of key
	pubkey_ed25519 ed25519.PublicKey // can be empty, if not same type, but often it is
	assets         []Asset
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="assetburnargs"><a class="header" href="#assetburnargs">AssetBurnArgs</a></h2>
<pre><code class="language-v">struct AssetBurnArgs {
pub:
	account    string
	name       string
	burnamount f64
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="assetcreateargs"><a class="header" href="#assetcreateargs">AssetCreateArgs</a></h2>
<pre><code class="language-v">struct AssetCreateArgs {
pub:
	account string
	name    string
	// TODO specify
	multisig MultiSig // optional
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="assetdeleteargs"><a class="header" href="#assetdeleteargs">AssetDeleteArgs</a></h2>
<pre><code class="language-v">struct AssetDeleteArgs {
pub:
	account string
	name    string
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="assetmintargs"><a class="header" href="#assetmintargs">AssetMintArgs</a></h2>
<pre><code class="language-v">struct AssetMintArgs {
pub:
	account    string
	name       string
	mintamount f64
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="buyactionarg"><a class="header" href="#buyactionarg">BuyActionArg</a></h2>
<pre><code class="language-v">struct BuyActionArg {
	account            string
	asset_buy          string // the asset you want to buy
	max_price_usd      f64    // maximum price your want to buy for
	expirationtime_min u16    // max time in minutes, the trade stays open
	memo               string // per type blockchain we need to check that memo field
	// is not too long, is not everywhere used
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="defipooldepositargs"><a class="header" href="#defipooldepositargs">DefiPoolDepositArgs</a></h2>
<pre><code class="language-v">struct DefiPoolDepositArgs {
	poolasset1 string // a pool has 2 assets, this is the first one
	amount1    f64
	currency1  string
	poolasset2 string // a pool has 2 assets, this is the first one
	amount2    f64
	currency2  string
	memo       string // per type blockchain we need to check that memo field is not too long, is not everywhere used
}
</code></pre>
<p>set of arguments to create, or add to a DEFIPool this is for an AMM DEFI pool (Automatic Market Making DEFI Pool)</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="defipoolidentity"><a class="header" href="#defipoolidentity">DefiPoolIdentity</a></h2>
<pre><code class="language-v">struct DefiPoolIdentity {
	poolasset1 string // a pool has 2 assets, this is the first one
	poolasset2 string
}
</code></pre>
<p>identify a pool, is unique, the order of asset 1 or 2 does not matter</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="defipoolinfo"><a class="header" href="#defipoolinfo">DefiPoolInfo</a></h2>
<pre><code class="language-v">struct DefiPoolInfo {
	pairs []DefiPoolInfoPairInfo // is always 2, need to check this is correct
	// TODO what else is important here?
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="defipoolinfopairinfo"><a class="header" href="#defipoolinfopairinfo">DefiPoolInfoPairInfo</a></h2>
<pre><code class="language-v">struct DefiPoolInfoPairInfo {
	currency string
	amount   f64
	// TODO what else is important here?
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="defipoolwithdrawargs"><a class="header" href="#defipoolwithdrawargs">DefiPoolWithDrawArgs</a></h2>
<pre><code class="language-v">struct DefiPoolWithDrawArgs {
	poolasset1 string // a pool has 2 assets, this is the first one
	amount1    f64
	currency1  string
	poolasset2 string // a pool has 2 assets, this is the first one
	amount2    f64
	currency2  string
	memo       string // per type blockchain we need to check that memo field is not too long, is not everywhere used
}
</code></pre>
<p>withdraw money from the pool need to specify which currency and amount per currency</p>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="multisig"><a class="header" href="#multisig">MultiSig</a></h2>
<pre><code class="language-v">struct MultiSig {
pub:
	pubkeys       []string // the pubkeys of who needs to sign
	min_signature i16      // how many need minimally to sign
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="orderbookinfo"><a class="header" href="#orderbookinfo">OrderBookInfo</a></h2>
<pre><code class="language-v">struct OrderBookInfo {
pub mut:
	pairs []OrderBookInfoPair
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="orderbookinfoargs"><a class="header" href="#orderbookinfoargs">OrderBookInfoArgs</a></h2>
<pre><code class="language-v">struct OrderBookInfoArgs {
pub mut:
	only_my_orders bool = true
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="orderbookinfopair"><a class="header" href="#orderbookinfopair">OrderBookInfoPair</a></h2>
<pre><code class="language-v">struct OrderBookInfoPair {
pub mut:
	currency1 string
	// TODO specify	
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="sellactionarg"><a class="header" href="#sellactionarg">SellActionArg</a></h2>
<pre><code class="language-v">struct SellActionArg {
	account            string
	asset_sell         string // the asset you want to sell
	min_price_usd      f64    // min price your want to sell for always in USDC
	expirationtime_min u16    // max time in minutes, the trade stays open
	memo               string // per type blockchain we need to check that memo field is not too long, is not everywhere used
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="sendargs"><a class="header" href="#sendargs">SendArgs</a></h2>
<pre><code class="language-v">struct SendArgs {
	account  string // the account we are sending info from
	to       string
	amount   f64
	currency string
	memo     string // per type blockchain we need to check that memo field is not too long
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h2 id="tradeinfopair"><a class="header" href="#tradeinfopair">TradeInfoPair</a></h2>
<pre><code class="language-v">struct TradeInfoPair {
pub mut:
	// TODO specify	
	state TradeState
}
</code></pre>
<p><a href="v/crypto.html#Contents">[Return to contents]</a></p>
<h4 id="powered-by-vdoc"><a class="header" href="#powered-by-vdoc">Powered by vdoc.</a></h4>
<div style="break-before: page; page-break-before: always;"></div><h1 id="module-tfgrid"><a class="header" href="#module-tfgrid">module tfgrid</a></h1>
<h1 id="tfgrid-workload-deployment"><a class="header" href="#tfgrid-workload-deployment">TFGrid workload deployment</a></h1>
<blockquote>
<p>inspired by: https://library.threefold.me/info/manual/#/manual3_iac/grid3_javascript</p>
</blockquote>
<p>this client allows deployment of all kinds of workloads on TFGrid</p>
<ul>
<li>kubernetes</li>
<li>vm</li>
<li>zdb</li>
<li>networks</li>
<li>qsfs (quantum safe filesystem)</li>
<li>kvs (key value stor)</li>
<li>gateways</li>
<li>...</li>
</ul>
<blockquote>
<p>TODO: </p>
</blockquote>
<h2 id="principles"><a class="header" href="#principles">Principles</a></h2>
<p>The metadata we need to remember is stored in the KVS on TFChain (encrypted by the private key of the account).
This metadata is important it has all info in relation to workloads we have deployed, where are they deployed, ...</p>
<h2 id="todo"><a class="header" href="#todo">TODO</a></h2>
<ul>
<li>key value stor on tfchain</li>
<li>most of primitives</li>
<li>how to do capacity planning using the TFGrid Proxy</li>
</ul>
<h2 id="contents-1"><a class="header" href="#contents-1">Contents</a></h2>
<ul>
<li><a href="v/tfgrid.html#account_delete">account_delete</a></li>
<li><a href="v/tfgrid.html#account_init">account_init</a></li>
<li><a href="v/tfgrid.html#vm_create">vm_create</a></li>
<li><a href="v/tfgrid.html#vm_delete">vm_delete</a></li>
<li><a href="v/tfgrid.html#vm_info">vm_info</a></li>
<li><a href="v/tfgrid.html#zdb_create">zdb_create</a></li>
<li><a href="v/tfgrid.html#zdb_delete">zdb_delete</a></li>
<li><a href="v/tfgrid.html#zdb_info">zdb_info</a></li>
<li><a href="v/tfgrid.html#ZDBMode">ZDBMode</a></li>
<li><a href="v/tfgrid.html#AccountArgs">AccountArgs</a></li>
<li><a href="v/tfgrid.html#IPRange">IPRange</a></li>
<li><a href="v/tfgrid.html#MultiSig">MultiSig</a></li>
<li><a href="v/tfgrid.html#VMArgs">VMArgs</a></li>
<li><a href="v/tfgrid.html#VMDisk">VMDisk</a></li>
<li><a href="v/tfgrid.html#VMInfo">VMInfo</a></li>
<li><a href="v/tfgrid.html#VMNet">VMNet</a></li>
<li><a href="v/tfgrid.html#ZDBArgs">ZDBArgs</a></li>
<li><a href="v/tfgrid.html#ZDBInfo">ZDBInfo</a></li>
</ul>
<h2 id="account_delete-1"><a class="header" href="#account_delete-1">account_delete</a></h2>
<pre><code class="language-v">fn account_delete(name string) ?
</code></pre>
<p>delete account on the handler in case it was already initialized, does not give error if not active yet if multisignature more than one will have to do</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="account_init-1"><a class="header" href="#account_init-1">account_init</a></h2>
<pre><code class="language-v">fn account_init(args AccountArgs)
</code></pre>
<p>init the account on the action handler for TFGrid will give error if it already exists and mneomonic or type different will also give error if an error to create it e.g. wrong mnemonic the account will be selected, which means all actions done after are done on this account</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="vm_create"><a class="header" href="#vm_create">vm_create</a></h2>
<pre><code class="language-v">fn vm_create(args VMArgs) ?
</code></pre>
<p>init the account on the action handler for TFGrid will give error if it already exists and mneomonic or type different will also give error if an error to create it e.g. wrong mnemonic the account will be selected, which means all actions done after are done on this account</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="vm_delete"><a class="header" href="#vm_delete">vm_delete</a></h2>
<pre><code class="language-v">fn vm_delete(name string) ?
</code></pre>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="vm_info"><a class="header" href="#vm_info">vm_info</a></h2>
<pre><code class="language-v">fn vm_info(name string) ?VMInfo
</code></pre>
<p>get object info from a deployed ZDB namespace</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="zdb_create"><a class="header" href="#zdb_create">zdb_create</a></h2>
<pre><code class="language-v">fn zdb_create(args ZDBArgs) ?
</code></pre>
<p>init the account on the action handler for TFGrid will give error if it already exists and mneomonic or type different will also give error if an error to create it e.g. wrong mnemonic the account will be selected, which means all actions done after are done on this account</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="zdb_delete"><a class="header" href="#zdb_delete">zdb_delete</a></h2>
<pre><code class="language-v">fn zdb_delete(name string) ?
</code></pre>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="zdb_info"><a class="header" href="#zdb_info">zdb_info</a></h2>
<pre><code class="language-v">fn zdb_info(name string) ?ZDBInfo
</code></pre>
<p>get object info from a deployed ZDB namespace</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="zdbmode"><a class="header" href="#zdbmode">ZDBMode</a></h2>
<pre><code class="language-v">enum ZDBMode {
	user
	seq
}
</code></pre>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="accountargs-1"><a class="header" href="#accountargs-1">AccountArgs</a></h2>
<pre><code class="language-v">struct AccountArgs {
pub:
	name       string
	mnemonic   string // private key in mnemonic form to be able to work on the right TFGrid net (TFChain)
	nettype    TFGridNet
	expiration int = 300 // will expire default 5 min
	multisig   MultiSig // optional, not implemented yet in TFGrid
}
</code></pre>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="iprange"><a class="header" href="#iprange">IPRange</a></h2>
<pre><code class="language-v">struct IPRange {
pub:
	range string = '10.10.0.0'
	mask  i16    = 16
}
</code></pre>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="multisig-1"><a class="header" href="#multisig-1">MultiSig</a></h2>
<pre><code class="language-v">struct MultiSig {
pub:
	pubkeys       []string // the pubkeys of who needs to sign
	min_signature i16      // how many need minimally to sign
}
</code></pre>
<p>used for when we do smart contract for IT with multiple people</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="vmargs"><a class="header" href="#vmargs">VMArgs</a></h2>
<pre><code class="language-v">struct VMArgs {
pub:
	name        string
	disks       []VMDisk
	network     VMNet
	node_id     u32  // id of the node where this VM needs to be deployed
	public_ip   bool // connect virtual machine to public internet, this VM will receive an IP address
	planetary   bool // connect the virtual machine to the planetary network
	cpu         u8   // nr of cpu cores 1...16
	memory      u16  // MB of ram e.g. 1024*2 would be 2 GB
	rootfs_size u16    = 1 // GB of root filesystem
	flist       string = 'https://hub.grid.tf/tf-official-apps/base:latest.flist'
	entrypoint  string = '/sbin/zinit init'
	env         map[string]string // environment variables as passed to VM
	ssh_key     string // default ssh_key is alias to SSH_KEY in env
}
</code></pre>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="vmdisk"><a class="header" href="#vmdisk">VMDisk</a></h2>
<pre><code class="language-v">struct VMDisk {
pub:
	name       string = 'default'
	size       i16    = 8 // GB size of disk
	mountpoint string = '/testdisk'
}
</code></pre>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="vminfo"><a class="header" href="#vminfo">VMInfo</a></h2>
<pre><code class="language-v">struct VMInfo {
pub:
	name        string
	disks       []VMDisk
	network     VMNet
	node_id     u32  // id of the node where this VM needs to be deployed
	public_ip   bool // connect virtual machine to public internet, this VM will receive an IP address
	planetary   bool // connect the virtual machine to the planetary network
	cpu         u8   // nr of cpu cores 1...16
	memory      u16  // MB of ram e.g. 1024*2 would be 2 GB
	rootfs_size u16    = 1 // GB of root filesystem
	flist       string = 'https://hub.grid.tf/tf-official-apps/base:latest.flist'
	entrypoint  string = '/sbin/zinit init'
	env         map[string]string // environment variables as passed to VM
	ssh_key     string // default ssh_key is alias to SSH_KEY in env
}
</code></pre>
<p>TODO what info comes back?</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="vmnet"><a class="header" href="#vmnet">VMNet</a></h2>
<pre><code class="language-v">struct VMNet {
pub:
	name  string
	range IPRange
}
</code></pre>
<p>network needs to correspond to network created on nodes, otherwise this will not work</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="zdbargs"><a class="header" href="#zdbargs">ZDBArgs</a></h2>
<pre><code class="language-v">struct ZDBArgs {
pub:
	name      string
	node_id   u32 // id of the node where this ZDB namespace needs to be deployed
	mode      ZDBMode
	disk_size u16 = 9
	public    bool   // a public namespace can be read-only if a password is set
	password  string // password as set on the namespace
}
</code></pre>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h2 id="zdbinfo"><a class="header" href="#zdbinfo">ZDBInfo</a></h2>
<pre><code class="language-v">struct ZDBInfo {
pub:
	name      string
	node_id   u32 // id of the node where this ZDB namespace needs to be deployed
	mode      ZDBMode
	disk_size u16 = 9
	public    bool   // a public namespace can be read-only if a password is set
	password  string // password as set on the namespace
}
</code></pre>
<p>TODO what info comes back?</p>
<p><a href="v/tfgrid.html#Contents">[Return to contents]</a></p>
<h4 id="powered-by-vdoc-1"><a class="header" href="#powered-by-vdoc-1">Powered by vdoc.</a></h4>
<div style="break-before: page; page-break-before: always;"></div><h1 id="module-twinactions"><a class="header" href="#module-twinactions">module twinactions</a></h1>
<h1 id="twin-actions-1"><a class="header" href="#twin-actions-1">Twin actions</a></h1>
<p>set of actions as can be executed by twin, can be done by different executors e.g.</p>
<ul>
<li>vlang</li>
<li>golang</li>
<li>javascript</li>
</ul>
<p>most of them right now are done in golang</p>
<h2 id="contents-2"><a class="header" href="#contents-2">Contents</a></h2>
<ul>
<li><a href="v/twinactions.html#action_send">action_send</a></li>
</ul>
<h2 id="action_send"><a class="header" href="#action_send">action_send</a></h2>
<pre><code class="language-v">fn action_send(b resp2.Builder) ?resp.StringLineReader
</code></pre>
<p>TODO complete</p>
<p><a href="v/twinactions.html#Contents">[Return to contents]</a></p>
<h4 id="powered-by-vdoc-2"><a class="header" href="#powered-by-vdoc-2">Powered by vdoc.</a></h4>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
